<launch>
    <rosparam command="load" file="$(find spirit_utils)/../config/project_params.yaml"/>

    <arg name="with_proxy" default="false"/>
    
    <arg name="with_mocap" default="false"/>

    <group if="$(arg with_proxy)">
        <node name="robot_interface" pkg="spirit_utils" type="robot_interface_node" output="screen"/>
    </group>

    <group if="$(arg with_mocap)">
        <node name="mocap_node"
              pkg="mocap_optitrack"
              type="mocap_node"
              respawn="false"
              launch-prefix=""
              required="true">
            <rosparam file="$(find mocap_optitrack)/config/mocap.yaml" />
        </node>
    </group>

    <!-- Launch the node the publish state estimate messages-->
    <node name="ekf_estimator" pkg="ekf_estimator" type="ekf_estimator_node" output="screen"/>

    <!-- Launch the node the publish contact detection messages-->
    <node name="contact_detection" pkg="contact_detection" type="contact_detection_node" output="screen"/>

    <!-- Launch the node to publish the mpc controller -->
    <node name="mpc_controller" pkg="mpc_controller" type="mpc_controller_node" output="screen"/>

</launch>
